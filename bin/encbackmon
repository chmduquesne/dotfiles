#!/bin/bash

uuid=fa7aa25e-c196-413d-b300-29c88fac79e0

inotifywait --monitor --event create --format '%f' /media/ | \
    while read file; do
        case $file in
            $uuid)
                notify-send -u critical "Backup starting!" "Do NOT unplug the disk"
                sleep 1
                rsync -az --delete --exclude-from=$HOME/.backup.exclude $HOME/ /media/$uuid
                notify-send -u critical "Backup finished." "You can eject the device"
                ;;
            *)
                ;;
        esac
    done
